---
- name: "packages | check facts"
  package_facts:
    manager: apt

- name: "packages | Add backports repository"
  apt_repository:
    repo: "deb http://ftp.de.debian.org/debian {{ ansible_distribution_release }}-backports main contrib non-free"
    state: present


- name: "packages | install packages"
  apt:
    pkg:
      - curl
      - dehydrated
      - fail2ban
      - git
      - htop
      - locales
      - mc
      - molly-guard
      - monit
      - moreutils
      - munin-node
      - ncdu
      - rsync
      - screen
      - sqlite3
      - sudo
      - unattended-upgrades
      - vim
      - wget
    cache_valid_time: 3600

- name: "packages | install ferm"
  apt:
    pkg:
      - ferm
  when: ferm.install is defined and ferm.install
